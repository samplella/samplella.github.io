var AlgoliaAnalytics=function(n){"use strict";var e=function(){try{return Boolean(navigator.cookieEnabled)}catch(n){return!1}},t=function(){try{return Boolean(navigator.sendBeacon)}catch(n){return!1}},i=function(){try{return Boolean(XMLHttpRequest)}catch(n){return!1}},o=function(n){return void 0===n},r=function(n){return"string"==typeof n},s=function(n){return"number"==typeof n},a=function(n){return"function"==typeof n},c="insights-js (2.1.0)";var u=["de","us"],h=2592e6;var l,d,f,p,v=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)})},g="_ALGOLIA",k=function(n,e,t){var i=new Date;i.setTime(i.getTime()+t);var o="expires="+i.toUTCString();document.cookie=n+"="+e+";"+o+";path=/"},y=function(n){for(var e=n+"=",t=document.cookie.split(";"),i=0;i<t.length;i++){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return""};Object.keys||(Object.keys=(l=Object.prototype.hasOwnProperty,d=!{toString:null}.propertyIsEnumerable("toString"),p=(f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(n){if("function"!=typeof n&&("object"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var e,t,i=[];for(e in n)l.call(n,e)&&i.push(e);if(d)for(t=0;t<p;t++)l.call(n,f[t])&&i.push(f[t]);return i})),"function"!=typeof Object.assign&&(Object.assign=function(n,e){var t=arguments;if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(n),o=1;o<arguments.length;o++){var r=t[o];if(null!=r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i});var b=function(n){var t=n.requestFn;this._ua="",this._uaURIEncoded="",this.version="2.1.0",this._hasCredentials=!1,this.sendEvent=function(n){return function(e,t){var i,o;if(!this._userHasOptedOut){if(!this._hasCredentials)throw new Error("Before calling any methods on the analytics, you first need to call the 'init' function with appId and apiKey parameters");var r=Object.assign(Object.assign({},t),{eventType:e,userToken:(o=null===(i=t)||void 0===i?void 0:i.userToken,null!==o&&void 0!==o?o:this._userToken)});return function(n,e,t,i,o,r){return n(o+"/1/events?X-Algolia-Application-Id="+e+"&X-Algolia-API-Key="+t+"&X-Algolia-Agent="+i,{events:r})}(n,this._appId,this._apiKey,this._uaURIEncoded,this._endpointOrigin,[r])}}}(t).bind(this),this.init=function(n){var e;if(!n)throw new Error("Init function should be called with an object argument containing your apiKey and appId");if(o(n.apiKey)||!r(n.apiKey))throw new Error("apiKey is missing, please provide it so we can authenticate the application");if(o(n.appId)||!r(n.appId))throw new Error("appId is missing, please provide it, so we can properly attribute data to your application");if(!o(n.region)&&-1===u.indexOf(n.region))throw new Error("optional region is incorrect, please provide either one of: "+u.join(", ")+".");if(!(o(n.cookieDuration)||s(n.cookieDuration)&&isFinite(n.cookieDuration)&&Math.floor(n.cookieDuration)===n.cookieDuration))throw new Error("optional cookieDuration is incorrect, expected an integer.");this._apiKey=n.apiKey,this._appId=n.appId,this._userHasOptedOut=!!n.userHasOptedOut,this._region=n.region,this._endpointOrigin=n.region?"https://insights."+n.region+".algolia.io":"https://insights.algolia.io",this._useCookie=null!==(e=n.useCookie)&&void 0!==e&&e,this._cookieDuration=n.cookieDuration?n.cookieDuration:6*h,this._hasCredentials=!0,this._ua=c,this._uaURIEncoded=encodeURIComponent(c),n.userToken?this.setUserToken(n.userToken):this._userToken||this._userHasOptedOut||!this._useCookie||this.setAnonymousUserToken()}.bind(this),this.addAlgoliaAgent=function(n){-1===this._ua.indexOf("; "+n)&&(this._ua+="; "+n,this._uaURIEncoded=encodeURIComponent(this._ua))}.bind(this),this.setUserToken=function(n){this._userToken=n,a(this._onUserTokenChangeCallback)&&this._onUserTokenChangeCallback(this._userToken)}.bind(this),this.setAnonymousUserToken=function(){if(e()){var n=y(g);n&&""!==n&&0===n.indexOf("anonymous-")?this.setUserToken(n):(this.setUserToken("anonymous-"+v()),k(g,this._userToken,this._cookieDuration))}}.bind(this),this.getUserToken=function(n,e){return a(e)&&e(null,this._userToken),this._userToken}.bind(this),this.onUserTokenChange=function(n,e){this._onUserTokenChangeCallback=n,e&&e.immediate&&a(this._onUserTokenChangeCallback)&&this._onUserTokenChangeCallback(this._userToken)}.bind(this),this.clickedObjectIDsAfterSearch=function(n){this.sendEvent("click",n)}.bind(this),this.clickedObjectIDs=function(n){this.sendEvent("click",n)}.bind(this),this.clickedFilters=function(n){this.sendEvent("click",n)}.bind(this),this.convertedObjectIDsAfterSearch=function(n){this.sendEvent("conversion",n)}.bind(this),this.convertedObjectIDs=function(n){this.sendEvent("conversion",n)}.bind(this),this.convertedFilters=function(n){this.sendEvent("conversion",n)}.bind(this),this.viewedObjectIDs=function(n){this.sendEvent("view",n)}.bind(this),this.viewedFilters=function(n){this.sendEvent("view",n)}.bind(this),this.getVersion=function(n){a(n)&&n(this.version)}.bind(this)},_=function(n,e){var t=JSON.stringify(e);navigator.sendBeacon(n,t)},x=function(n,e){var t=JSON.stringify(e),i=new XMLHttpRequest;i.open("POST",n),i.send(t)};function O(n){var e,t=n.AlgoliaAnalyticsObject;if(t){var i=(e=this,function(n){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];n&&a(e[n])?e[n].apply(e,t):console.warn("The method `"+n+"` doesn't exist.")}),o=n[t];o.queue=o.queue||[];var r=o.queue;r.forEach(function(n){var e=[].slice.call(n),t=e[0],o=e.slice(1);i.apply(void 0,[t].concat(o))}),r.push=function(n){var e=[].slice.call(n),t=e[0],o=e.slice(1);i.apply(void 0,[t].concat(o))}}}function w(n){var e=new b({requestFn:n});return"undefined"!=typeof window&&O.call(e,window),e}var T=w(function(){if(t())return _;if(i())return x;throw new Error("Could not find a supported HTTP request client in this environment.")}());return n.createInsightsClient=w,n.default=T,n}({});
